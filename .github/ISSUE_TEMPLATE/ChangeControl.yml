name: Change Request
description: Request and track an IT change
title: "CHG: <short descriptive title>"
body:
  - type: markdown
    attributes:
      value: |
        ## Change Request Form
        Provide enough detail for CAB review and audit.  

  - type: input
    id: change_id
    attributes:
      label: Change ID
      description: Automatically generated ID based on creation date and issue number
      placeholder: "YYYYMMDD-<issue-number>"
      value: "{{ date | date: '%Y%m%d' }}-{{ issue.number }}"
    validations:
      required: true

  - type: dropdown
    id: change_type
    attributes:
      label: Change Type
      description: Classify the change
      options:
        - Standard
        - Normal
        - Emergency
    validations:
      required: true

  - type: input
    id: submitted_by
    attributes:
      label: Submitted By
      description: Name/email of the requester
      placeholder: user@example.com
    validations:
      required: true

  - type: input
    id: date_submitted
    attributes:
      label: Date Submitted
      description: ISO 8601 date/time with timezone
      placeholder: "2024-05-12T02:00:00Z"
    validations:
      required: true

  - type: textarea
    id: approvers
    attributes:
      label: Approvers
      description: List roles/names and approval status (e.g., CAB - pending)
      value: |
        - role: CAB
          name: 
          status: pending
          timestamp: 
    validations:
      required: false

  - type: textarea
    id: summary
    attributes:
      label: Summary and Scope
      description: Purpose, scope, and user/business impact of the change
      placeholder: Briefly describe what this change is and why it is needed.
    validations:
      required: true

  - type: dropdown
    id: category
    attributes:
      label: Category
      options:
        - Application
        - Infrastructure
        - Security
        - Database
        - Network
    validations:
      required: true

  - type: dropdown
    id: risk_level
    attributes:
      label: Risk Level
      options:
        - Low
        - Medium
        - High
    validations:
      required: true

  - type: textarea
    id: risk_reason
    attributes:
      label: Risk Reasoning
      description: Justify the selected risk level
      placeholder: Describe impact, blast radius, reversibility.
    validations:
      required: true

  - type: dropdown
    id: priority
    attributes:
      label: Priority
      options:
        - P1
        - P2
        - P3
    validations:
      required: true

  - type: textarea
    id: systems_affected
    attributes:
      label: Systems Affected
      description: Services, hosts, or components impacted
      value: |
        - service: 
          environment: 
    validations:
      required: true

  - type: textarea
    id: change_items
    attributes:
      label: Change Items / Implementation Steps
      description: Ordered list of steps with owners and timing
      value: |
        - order: 1
          owner: 
          action: 
          duration_estimate: 
    validations:
      required: true

  - type: textarea
    id: rollback_plan
    attributes:
      label: Rollback Plan
      description: Step-by-step actions to revert the change
      value: |
        - "Re-deploy previous stable version"
    validations:
      required: true

  - type: textarea
    id: validation_plan
    attributes:
      label: Validation Plan
      description: Pre- and post-change checks with expected outcomes
      value: |
        - check: "Smoke test /health"
          expected: "HTTP 200"
    validations:
      required: true

  - type: textarea
    id: dependencies
    attributes:
      label: Dependencies
      description: Upstream/downstream changes or tickets
      value: |
        - ""
    validations:
      required: false

  - type: textarea
    id: compliance_notes
    attributes:
      label: Compliance Notes
      description: SOX/PCI/HIPAA references if applicable
      value: "N/A"
    validations:
      required: false

  - type: input
    id: planned_start
    attributes:
      label: Planned Start
      description: Scheduled start date/time (include timezone)
      placeholder: "2024-05-12T02:00:00Z"
    validations:
      required: true

  - type: input
    id: planned_end
    attributes:
      label: Planned End
      description: Scheduled end date/time (include timezone)
      placeholder: "2024-05-12T03:00:00Z"
    validations:
      required: true

  - type: input
    id: maintenance_window
    attributes:
      label: Maintenance Window
      description: Standard window or free-form description
      placeholder: "Sun 02:00-03:00 UTC"
    validations:
      required: false

  - type: dropdown
    id: outage_expected
    attributes:
      label: Outage Expected
      options:
        - "Yes"
        - "No"
    validations:
      required: true

  - type: input
    id: outage_duration_estimate
    attributes:
      label: Estimated Outage Duration
      description: If outage is expected, provide duration (e.g., 15m)
    validations:
      required: false
